## 88节主站优化办法

1. 本地的``localstorage`` 读取数据。

2. ``localstorage``读取失败，转到``CDN``上面去读取数据

3. ``CDN`` 读取失败，转到后端提供的接口上读取数据。

4. 后端接口数据读取失败，启用本地的备份缓存数据，也是从``localstorage`` 中读取。

5. 如果还是失败，抛出数据读取错误。

** 如何判断数据是否更新 **

在同步渲染时，后端会给出对应的版本号，当前版本号跟 ``localstorage`` 的版本号进行比对是否跟新数据。

** 分会场时间变化数据更新 **

由于服务的内容是固定的，所有每次只需要请求对应的服务剩余数即可，所以更新剩余数即可。

** 会场楼层加载数据问题 **

会场要进行楼层跳转，同时要支持鼠标滚动。先算出楼层所在位置，根据所在位置加载当前楼层和上下楼层的数据。屏幕滚动事件要做事件稀释处理。

** 定时刷新数据问题 **

数据需要定时跟新，所以需要定时请求数据，但是在切换时间段时，数据是不需要更新的，如果直接去掉定时器，当页面在切换回去的时候其他的定时器会受到影响。解决办法是根基页面的请求要发送的数据来进行判断，如果数据是空则不进行请求。
